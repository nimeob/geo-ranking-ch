{
  "generated_at": "2026-02-27",
  "source": "src/web_service.py",
  "initial_issue": 250,
  "updated_by_issue": 251,
  "test_evidence_run": {
    "command": "python3 -m pytest -q tests/test_web_e2e.py tests/test_web_service_grouped_response.py tests/test_web_e2e_dev.py tests/test_web_service_port_resolution.py",
    "result": "47 passed, 2 skipped, 27 subtests passed"
  },
  "result_paths": [
    {
      "function": "Handler.do_GET",
      "path": "/health",
      "outcome": "ok",
      "http_status": 200,
      "coverage": "covered",
      "tests": [
        "test_health_and_version",
        "test_health_and_version_accept_trailing_slash_and_query",
        "test_health_and_version_accept_double_slashes"
      ]
    },
    {
      "function": "Handler.do_GET",
      "path": "/version",
      "outcome": "ok",
      "http_status": 200,
      "coverage": "covered",
      "tests": [
        "test_health_and_version",
        "test_health_and_version_accept_trailing_slash_and_query",
        "test_health_and_version_accept_double_slashes"
      ]
    },
    {
      "function": "Handler.do_GET",
      "path": "/health|/version",
      "outcome": "request_id_echo",
      "http_status": 200,
      "coverage": "covered",
      "tests": [
        "test_get_endpoints_echo_request_id"
      ]
    },
    {
      "function": "Handler.do_GET",
      "path": "unknown",
      "outcome": "not_found",
      "http_status": 404,
      "coverage": "covered",
      "tests": [
        "test_not_found",
        "test_dev_health_version_not_found"
      ]
    },
    {
      "function": "Handler.do_POST",
      "path": "/analyze",
      "outcome": "ok",
      "http_status": 200,
      "coverage": "covered",
      "tests": [
        "test_analyze_happy_path"
      ]
    },
    {
      "function": "Handler.do_POST",
      "path": "/analyze",
      "outcome": "unauthorized",
      "http_status": 401,
      "coverage": "covered",
      "tests": [
        "test_auth_required_for_analyze",
        "test_auth_rejects_malformed_bearer_headers",
        "test_dev_analyze_with_optional_auth"
      ]
    },
    {
      "function": "Handler.do_POST",
      "path": "/analyze",
      "outcome": "bad_request",
      "http_status": 400,
      "coverage": "covered",
      "tests": [
        "test_bad_request_invalid_mode",
        "test_bad_request_non_finite_timeout",
        "test_bad_request_empty_body",
        "test_bad_request_invalid_json_and_body_edgecases",
        "test_bad_request_options_must_be_object_when_provided",
        "test_bad_request_preferences_must_be_object_when_provided",
        "test_bad_request_preferences_reject_invalid_enums_and_weights"
      ]
    },
    {
      "function": "Handler.do_POST",
      "path": "/analyze",
      "outcome": "timeout",
      "http_status": 504,
      "coverage": "covered",
      "tests": [
        "test_timeout_address_intel_and_internal_are_mapped"
      ]
    },
    {
      "function": "Handler.do_POST",
      "path": "/analyze",
      "outcome": "address_intel",
      "http_status": 422,
      "coverage": "covered",
      "tests": [
        "test_timeout_address_intel_and_internal_are_mapped"
      ]
    },
    {
      "function": "Handler.do_POST",
      "path": "/analyze",
      "outcome": "internal",
      "http_status": 500,
      "coverage": "covered",
      "tests": [
        "test_timeout_address_intel_and_internal_are_mapped"
      ]
    },
    {
      "function": "Handler.do_POST",
      "path": "unknown",
      "outcome": "not_found",
      "http_status": 404,
      "coverage": "covered",
      "tests": [
        "test_post_not_found_for_unknown_route"
      ]
    },
    {
      "function": "_resolve_port",
      "path": "env resolution",
      "outcome": "valid+invalid env handling",
      "http_status": null,
      "coverage": "covered",
      "tests": [
        "tests/test_web_service_port_resolution.py::TestResolvePort"
      ]
    }
  ],
  "open_gaps": []
}
