{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://geo-ranking-ch.local/docs/api/schemas/v1/error.response.schema.json",
  "title": "ErrorResponseV1",
  "type": "object",
  "additionalProperties": false,
  "required": ["ok", "api_version", "request_id", "error"],
  "properties": {
    "ok": { "const": false },
    "api_version": { "type": "string", "pattern": "^v[0-9]+$" },
    "request_id": { "type": "string", "minLength": 1, "maxLength": 128 },
    "error": {
      "type": "object",
      "additionalProperties": false,
      "required": ["code", "message"],
      "properties": {
        "code": {
          "type": "string",
          "enum": [
            "bad_request",
            "unauthorized",
            "not_found",
            "validation_failed",
            "rate_limited",
            "upstream_error",
            "timeout",
            "internal"
          ]
        },
        "message": { "type": "string", "minLength": 1 },
        "details": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["field", "issue"],
            "properties": {
              "field": { "type": "string" },
              "issue": { "type": "string" }
            }
          }
        }
      }
    }
  }
}